(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[896],{88801:function(e,t,a){Promise.resolve().then(a.bind(a,12972))},92503:function(e,t,a){"use strict";a.d(t,{Z:function(){return C}});var n=a(2265),l=a(20653),r=a(16480),i=a.n(r),o=a(44329),s=a(35704),c=a(57499),d=a(97676),u=a(91460),p=a(55614),m=a(13565),f=a(51350),g=a(70595),v=a(91657),h=a(63834),x=a(78387);let b=e=>{let{componentCls:t,iconCls:a,antCls:n,zIndexPopup:l,colorText:r,colorWarning:i,marginXXS:o,marginXS:s,fontSize:c,fontWeightStrong:d,colorTextHeading:u}=e;return{[t]:{zIndex:l,[`&${n}-popover`]:{fontSize:c},[`${t}-message`]:{marginBottom:s,display:"flex",flexWrap:"nowrap",alignItems:"start",[`> ${t}-message-icon ${a}`]:{color:i,fontSize:c,lineHeight:1,marginInlineEnd:s},[`${t}-title`]:{fontWeight:d,color:u,"&:only-child":{fontWeight:"normal"}},[`${t}-description`]:{marginTop:o,color:r}},[`${t}-buttons`]:{textAlign:"end",whiteSpace:"nowrap",button:{marginInlineStart:s}}}}};var y=(0,x.I$)("Popconfirm",e=>b(e),e=>{let{zIndexPopupBase:t}=e;return{zIndexPopup:t+60}},{resetStyle:!1}),j=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var l=0,n=Object.getOwnPropertySymbols(e);l<n.length;l++)0>t.indexOf(n[l])&&Object.prototype.propertyIsEnumerable.call(e,n[l])&&(a[n[l]]=e[n[l]]);return a};let E=e=>{let{prefixCls:t,okButtonProps:a,cancelButtonProps:r,title:i,description:o,cancelText:s,okText:d,okType:h="primary",icon:x=n.createElement(l.Z,null),showCancel:b=!0,close:y,onConfirm:j,onCancel:E,onPopupClick:O}=e,{getPrefixCls:w}=n.useContext(c.E_),[C]=(0,g.Z)("Popconfirm",v.Z.Popconfirm),N=(0,p.Z)(i),Z=(0,p.Z)(o);return n.createElement("div",{className:"".concat(t,"-inner-content"),onClick:O},n.createElement("div",{className:"".concat(t,"-message")},x&&n.createElement("span",{className:"".concat(t,"-message-icon")},x),n.createElement("div",{className:"".concat(t,"-message-text")},N&&n.createElement("div",{className:"".concat(t,"-title")},N),Z&&n.createElement("div",{className:"".concat(t,"-description")},Z))),n.createElement("div",{className:"".concat(t,"-buttons")},b&&n.createElement(m.ZP,Object.assign({onClick:E,size:"small"},r),s||(null==C?void 0:C.cancelText)),n.createElement(u.Z,{buttonProps:Object.assign(Object.assign({size:"small"},(0,f.nx)(h)),a),actionFn:j,close:y,prefixCls:w("btn"),quitOnNullishReturnValue:!0,emitEvent:!0},d||(null==C?void 0:C.okText))))};var O=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var l=0,n=Object.getOwnPropertySymbols(e);l<n.length;l++)0>t.indexOf(n[l])&&Object.prototype.propertyIsEnumerable.call(e,n[l])&&(a[n[l]]=e[n[l]]);return a};let w=n.forwardRef((e,t)=>{var a,r;let{prefixCls:u,placement:p="top",trigger:m="click",okType:f="primary",icon:g=n.createElement(l.Z,null),children:v,overlayClassName:h,onOpenChange:x,onVisibleChange:b}=e,j=O(e,["prefixCls","placement","trigger","okType","icon","children","overlayClassName","onOpenChange","onVisibleChange"]),{getPrefixCls:w}=n.useContext(c.E_),[C,N]=(0,o.Z)(!1,{value:null!==(a=e.open)&&void 0!==a?a:e.visible,defaultValue:null!==(r=e.defaultOpen)&&void 0!==r?r:e.defaultVisible}),Z=(e,t)=>{N(e,!0),null==b||b(e),null==x||x(e,t)},S=w("popconfirm",u),k=i()(S,h),[P]=y(S);return P(n.createElement(d.Z,Object.assign({},(0,s.Z)(j,["title"]),{trigger:m,placement:p,onOpenChange:(t,a)=>{let{disabled:n=!1}=e;n||Z(t,a)},open:C,ref:t,overlayClassName:k,content:n.createElement(E,Object.assign({okType:f,icon:g},e,{prefixCls:S,close:e=>{Z(!1,e)},onConfirm:t=>{var a;return null===(a=e.onConfirm)||void 0===a?void 0:a.call(void 0,t)},onCancel:t=>{var a;Z(!1,t),null===(a=e.onCancel)||void 0===a||a.call(void 0,t)}})),"data-popover-inject":!0}),v))});w._InternalPanelDoNotUseOrYouWillBeFired=e=>{let{prefixCls:t,placement:a,className:l,style:r}=e,o=j(e,["prefixCls","placement","className","style"]),{getPrefixCls:s}=n.useContext(c.E_),d=s("popconfirm",t),[u]=y(d);return u(n.createElement(h.ZP,{placement:a,className:i()(d,l),style:r,content:n.createElement(E,Object.assign({prefixCls:d},o))}))};var C=w},12972:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return y}});var n=a(57437),l=a(2265),r=a(65270),i=a(6180),o=a(13565),s=a(92503),c=a(80588),d=a(42154),u=a(47867),p=a(49135),m=a(89539),f=a.n(m),g=a(71126),v=a(47907),h=a(58856),x=a(73107);function b(e){let{evidence:t,alt:a}=e,[r,i]=l.useState(!1),[s,c]=l.useState(""),d=l.useRef(null),{data:u}=(0,g.useSession)();l.useEffect(()=>{let e=async()=>{try{var e;let a=(await x.Z.get(t,{responseType:"blob",headers:{Authorization:"Bearer ".concat(null==u?void 0:null===(e=u.user)||void 0===e?void 0:e.access_token)}})).data;if(a instanceof Blob){let e=URL.createObjectURL(a);c(e)}}catch(e){}};u&&r&&e()},[t,u,r]);let p=()=>{d.current&&d.current.pause(),i(!1)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.ZP,{className:"px-4 py-2 m-2 font-bold text-white bg-blue-500 rounded hover:bg-blue-700",size:"small",onClick:()=>i(!0),children:"Show Video"}),(0,n.jsx)(h.Z,{title:"Video Preview",open:r,onCancel:p,footer:[(0,n.jsx)(o.ZP,{danger:!0,onClick:p,className:"px-4 py-2 text-white bg-red-500 rounded hover:bg-red-700",children:"Close"},"close")],closable:!1,className:"max-w-3xl",centered:!0,children:s?(0,n.jsxs)("div",{className:"relative w-full pb-[56.25%]",children:[" ",(0,n.jsx)("video",{ref:d,src:s,controls:!0,className:"absolute inset-0 object-cover w-full h-full"})]}):(0,n.jsx)("div",{className:"flex items-center justify-center h-48",children:"Loading..."})})]})}function y(){let e=(0,v.useRouter)(),[t,a]=l.useState(0),m=[{title:"Nama Sekolah",dataIndex:"nama_sekolah"},{title:"Juara",dataIndex:"juara"},{title:"Nama Siswa",dataIndex:"nama_siswa"},{title:"Nama Instagram",dataIndex:"nama_instagram"},{title:"Video",dataIndex:"media_url",render:(e,t)=>{let{url_video:a,title:l}=t;return(0,n.jsx)(n.Fragment,{children:a?(0,n.jsx)(b,{evidence:a,alt:l}):""})}},{title:"Created Date",dataIndex:"created_at",render:(e,t)=>{let{created_at:a}=t;return(0,n.jsx)(n.Fragment,{children:f()(a).format("DD MMM YYYY, hh:mm")})}},{title:"Action",key:"action",render:(t,a)=>(0,n.jsxs)(r.Z,{size:"middle",children:[(0,n.jsx)(i.Z,{title:"edit",children:(0,n.jsx)(o.ZP,{shape:"circle",onClick:()=>e.push("/dashboard/video/edit?aa=".concat(a.id)),icon:(0,n.jsx)(u.FNg,{className:"w-5 h-5 text-sky-700"})})}),(0,n.jsx)(i.Z,{title:"delete",children:(0,n.jsx)(s.Z,{title:"Delete data",placement:"left",description:"Are you sure to delete this data?",onConfirm:()=>Z(a.id),okText:"Yes",cancelText:"No",children:(0,n.jsx)(o.ZP,{shape:"circle",icon:(0,n.jsx)(u.v_0,{className:"w-5 h-5 text-red-500"})})})})]})}],[h,x]=l.useState(),[y,j]=l.useState(!1),[E,O]=c.ZP.useMessage();(0,v.useSearchParams)();let[w,C]=l.useState({pagination:{current:1,pageSize:10,total:0}}),{data:N}=(0,g.useSession)(),Z=async e=>{var t;let n=await (0,p.Z)("DELETE","".concat("https://sun.uzone.id/masterclass/","api/v1/cms/karya-siswa/?id=").concat(e),{},{accept:"application/json",Authorization:"Bearer ".concat(null==N?void 0:null===(t=N.user)||void 0===t?void 0:t.access_token)});E.open({type:"success",content:n.data.message}),a(Math.random())};return l.useEffect(()=>{let e=async()=>{var e;j(!0);let t=await (0,p.Z)("GET","".concat("https://sun.uzone.id/masterclass/","api/v1/cms/karya-siswa/"),{page:w.pagination.current,limit:w.pagination.pageSize},{accept:"application/json",Authorization:"Bearer ".concat(null==N?void 0:null===(e=N.user)||void 0===e?void 0:e.access_token)});j(!1),x(t.data.data.daftar_karya_siswa),C({...w,pagination:{...w.pagination,total:t.data.data.total}})};N&&e()},[w.pagination.current,w.pagination.pageSize,t,N]),(0,n.jsxs)(n.Fragment,{children:[O,(0,n.jsx)(d.Z,{size:"small",columns:m,dataSource:h,loading:y,pagination:w.pagination,onChange:e=>{var t;C({pagination:e}),e.pageSize!==(null===(t=w.pagination)||void 0===t?void 0:t.pageSize)&&x(null)},bordered:!0,footer:()=>"Total: ".concat(w.pagination.total||0),scroll:{x:"max-content"},className:"min-w-full"})]})}},49135:function(e,t,a){"use strict";a.d(t,{Z:function(){return l}});var n=a(73107);async function l(e,t,a,l){try{return await (0,n.Z)("GET"==e?{validateStatus:()=>!1,method:e,headers:l,url:t,params:a}:{validateStatus:()=>!1,method:e,headers:l,url:t,data:a}).catch(e=>e.response)}catch(e){return{data:e,status:500,statusText:"Internal Server Error",headers:{},config:{}}}}}},function(e){e.O(0,[5104,3429,9005,1126,2698,1537,3565,1618,6624,588,2355,3107,3080,577,4456,1342,2154,2971,8069,1744],function(){return e(e.s=88801)}),_N_E=e.O()}]);