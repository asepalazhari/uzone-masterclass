(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[896],{88801:function(e,t,a){Promise.resolve().then(a.bind(a,12972))},12972:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return S}});var n=a(57437),i=a(2265),s=a(65270),o=a(6180),r=a(13565),c=a(92503),l=a(80588),d=a(88841),u=a(47867),h=a(49135),p=a(89539),m=a.n(p),g=a(71126),x=a(47907),v=a(28118),f=a(73107);function j(e){let{evidence:t,alt:a}=e,[s,o]=i.useState(!1),[c,l]=i.useState(""),{data:d}=(0,g.useSession)();return i.useEffect(()=>{let e=async()=>{try{var e;let a=(await f.Z.get("".concat("https://sun.uzone.id/masterclass/","api/v1/media/show?filename=").concat(t),{responseType:"blob",headers:{Authorization:"Bearer ".concat(null==d?void 0:null===(e=d.user)||void 0===e?void 0:e.access_token)}})).data;if(a instanceof Blob){let e=URL.createObjectURL(a);l(e)}}catch(e){}};d&&s&&e()},[t,d,s]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.ZP,{className:"m-1",size:"small",onClick:()=>o(!0),children:"Show Video"}),(0,n.jsx)(v.Z,{title:"Video Preview",open:s,okText:"Close",footer:[(0,n.jsx)(r.ZP,{danger:!0,onClick:()=>o(!1),children:"Close"},"submit")],children:c?(0,n.jsxs)("video",{width:"100%",height:"300",controls:!0,children:[(0,n.jsx)("source",{src:c,type:"video/mp4"}),"Your browser does not support the video tag."]}):(0,n.jsx)(n.Fragment,{children:"Loading..."})})]})}function S(){let e=(0,x.useRouter)(),[t,a]=i.useState(0),p=[{title:"Title",dataIndex:"title"},{title:"Description",dataIndex:"description"},{title:"Video",dataIndex:"media_url",render:(e,t)=>{let{filename:a,title:i}=t;return(0,n.jsx)(n.Fragment,{children:a?(0,n.jsx)(j,{evidence:a,alt:i}):""})}},{title:"Created Date",dataIndex:"created_at",render:(e,t)=>{let{created_at:a}=t;return(0,n.jsx)(n.Fragment,{children:m()(a).format("DD MMM YYYY, hh:mm")})}},{title:"Action",key:"action",render:(t,a)=>(0,n.jsxs)(s.Z,{size:"middle",children:[(0,n.jsx)(o.Z,{title:"edit",children:(0,n.jsx)(r.ZP,{shape:"circle",onClick:()=>e.push("/dashboard/video/edit?aa=".concat(a.id)),icon:(0,n.jsx)(u.FNg,{className:"w-5 h-5 text-sky-700"})})}),(0,n.jsx)(o.Z,{title:"delete",children:(0,n.jsx)(c.Z,{title:"Delete data",placement:"left",description:"Are you sure to delete this data?",onConfirm:()=>b(a.id),okText:"Yes",cancelText:"No",children:(0,n.jsx)(r.ZP,{shape:"circle",icon:(0,n.jsx)(u.v_0,{className:"w-5 h-5 text-red-500"})})})})]})}],[v,f]=i.useState(),[S,Z]=i.useState(!1),[k,w]=l.ZP.useMessage();(0,x.useSearchParams)();let[z,y]=i.useState({pagination:{current:1,pageSize:10,total:0}}),{data:_}=(0,g.useSession)(),b=async e=>{var t;let n=await (0,h.Z)("DELETE","".concat("https://sun.uzone.id/masterclass/","api/v1/media/"),{id:e},{accept:"application/json",Authorization:"Bearer ".concat(null==_?void 0:null===(t=_.user)||void 0===t?void 0:t.access_token)});k.open({type:"success",content:n.data.message}),a(Math.random())};return i.useEffect(()=>{let e=async()=>{var e;Z(!0);let t=await (0,h.Z)("GET","".concat("https://sun.uzone.id/masterclass/","api/v1/media/"),{skip:z.pagination.current,limit:z.pagination.pageSize},{accept:"application/json",Authorization:"Bearer ".concat(null==_?void 0:null===(e=_.user)||void 0===e?void 0:e.access_token)});Z(!1),f(t.data.data.media),y({...z,pagination:{...z.pagination,total:t.data.data.total}})};_&&e()},[z.pagination.current,z.pagination.pageSize,t,_]),(0,n.jsxs)(n.Fragment,{children:[w,(0,n.jsx)(d.Z,{size:"small",columns:p,dataSource:v,loading:S,pagination:z.pagination,onChange:e=>{var t;y({pagination:e}),e.pageSize!==(null===(t=z.pagination)||void 0===t?void 0:t.pageSize)&&f(null)},bordered:!0,footer:()=>"Total: ".concat(z.pagination.total||0),scroll:{x:"max-content"},className:"min-w-full"})]})}},49135:function(e,t,a){"use strict";a.d(t,{Z:function(){return i}});var n=a(73107);async function i(e,t,a,i){try{return await (0,n.Z)("GET"==e?{validateStatus:()=>!1,method:e,headers:i,url:t,params:a}:{validateStatus:()=>!1,method:e,headers:i,url:t,data:a}).catch(e=>e.response)}catch(e){return{data:e,status:500,statusText:"Internal Server Error",headers:{},config:{}}}}}},function(e){e.O(0,[5104,9098,429,1126,2698,916,3565,1618,588,3107,577,8172,8118,6624,1342,2355,3775,2971,8069,1744],function(){return e(e.s=88801)}),_N_E=e.O()}]);