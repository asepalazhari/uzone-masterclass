(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2946],{78980:function(e,t,a){Promise.resolve().then(a.bind(a,51764))},51764:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return h}});var i=a(57437),s=a(2265),n=a(61415),r=a(1881),l=a(80588),o=a(66577),d=a(13565),u=a(71126),c=a(49135),p=a(47907);function h(){let{TextArea:e}=n.default,[t]=r.Z.useForm(),[a,h]=s.useState(!1),[m,f]=s.useState(null),[v,g]=l.ZP.useMessage(),{data:j}=(0,u.useSession)(),x=(0,p.useRouter)(),y=(0,p.useSearchParams)(),Z=async e=>{var a;h(!0);let i=new FormData;i.append("title",e.title),i.append("description",e.description),e.file&&e.file.fileList.length>0&&i.append("file",e.file.fileList[0].originFileObj);let s=await (0,c.Z)("PUT","".concat("https://sun.uzone.id/masterclass/","api/v1/media/"),i,{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(null==j?void 0:null===(a=j.user)||void 0===a?void 0:a.access_token)});201==s.status?(v.open({type:"success",content:s.data.message}),t.resetFields(),x.push("/dashboard/video/list")):v.open({type:"error",content:"Failed to insert data"}),h(!1)};return s.useEffect(()=>{h(!0);let e=async()=>{var e;let t=await (0,c.Z)("GET","".concat("https://sun.uzone.id/masterclass/","api/v1/media/detail"),{id:y.get("aa")},{accept:"application/json",Authorization:"Bearer ".concat(null==j?void 0:null===(e=j.user)||void 0===e?void 0:e.access_token)});h(!1),f(t.data.data)};j&&e()},[j,y]),(0,i.jsxs)(i.Fragment,{children:[g,m?(0,i.jsxs)(r.Z,{name:"basic",layout:"vertical",onFinish:Z,autoComplete:"off",initialValues:m,children:[(0,i.jsx)(r.Z.Item,{label:"Title",name:"title",rules:[{required:!0,message:"Please input title"}],children:(0,i.jsx)(n.default,{placeholder:"Title",size:"large"})}),(0,i.jsx)(r.Z.Item,{label:"Description",name:"description",rules:[{required:!0,message:"Please input description"}],children:(0,i.jsx)(e,{placeholder:"Description",rows:4,size:"large"})}),(0,i.jsx)(r.Z.Item,{label:"Video",name:"file",rules:[{required:!0,message:"Please upload evidence"}],children:(0,i.jsx)(o.Z,{listType:"picture-card",accept:"video/*",maxCount:1,multiple:!0,beforeUpload:()=>!1,children:(0,i.jsxs)("div",{children:["+",(0,i.jsx)("div",{style:{marginTop:8},children:"Upload"})]})})}),(0,i.jsx)(r.Z.Item,{children:(0,i.jsx)(d.ZP,{loading:a,type:"primary",htmlType:"submit",danger:!0,children:"Submit"})})]}):(0,i.jsx)("div",{children:"Loading..."})]})}},49135:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});var i=a(73107);async function s(e,t,a,s){try{return await (0,i.Z)("GET"==e?{validateStatus:()=>!1,method:e,headers:s,url:t,params:a}:{validateStatus:()=>!1,method:e,headers:s,url:t,data:a}).catch(e=>e.response)}catch(e){return{data:e,status:500,statusText:"Internal Server Error",headers:{},config:{}}}}}},function(e){e.O(0,[9098,5544,1126,916,9551,1618,8948,8620,3107,1881,6577,2971,8069,1744],function(){return e(e.s=78980)}),_N_E=e.O()}]);